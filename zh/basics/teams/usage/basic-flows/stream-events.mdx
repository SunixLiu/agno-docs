---
title: 团队事件监控
sidebarTitle: 事件流
description: 这个例子展示了如何在团队执行过程中监控和处理不同类型的事件，包括工具调用、运行状态以及内容生成事件。
---

<Steps>

  <Step title="创建一个Python文件">
    ```bash
    touch stream_events.py
    ```
  </Step>

  <Step title="添加以下代码到你的Python文件">

    ```python stream_events.py
    import asyncio
    from uuid import uuid4

    from agno.agent import RunEvent
    from agno.agent.agent import Agent
    from agno.models.anthropic.claude import Claude

    from agno.models.openai import OpenAIChat
    from agno.team import Team, TeamRunEvent
    from agno.tools.duckduckgo import DuckDuckGoTools
    from agno.tools.hackernews import HackerNewsTools

    wikipedia_agent = Agent(
        id="hacker-news-agent",
        name="Hacker News Agent",
        role="Search Hacker News for information",
        tools=[HackerNewsTools()],
        instructions=[
            "Find articles about the company in the Hacker News",
        ],
    )

    website_agent = Agent(
        id="website-agent",
        name="Website Agent",
        role="Search the website for information",
        model=OpenAIChat(id="gpt-5-mini"),
        tools=[DuckDuckGoTools()],
        instructions=[
            "Search the website for information",
        ],
    )

    user_id = str(uuid4())
    id = str(uuid4())

    company_info_team = Team(
        name="Company Info Team",
        id=id,
        user_id=user_id,
        model=Claude(id="claude-3-7-sonnet-latest"),
        members=[
            wikipedia_agent,
            website_agent,
        ],
        markdown=True,
        instructions=[
            "You are a team that finds information about a company.",
            "First search the web and wikipedia for information about the company.",
            "If you can find the company's website URL, then scrape the homepage and the about page.",
        ],
        show_members_responses=True,
    )


    async def run_team_with_events(prompt: str):
        content_started = False
        async for run_output_event in company_info_team.arun(
            prompt,
            stream=True,
            stream_events=True,
        ):
            if run_output_event.event in [
                TeamRunEvent.run_started,
                TeamRunEvent.run_completed,
            ]:
                print(f"\nTEAM EVENT: {run_output_event.event}")

            if run_output_event.event in [TeamRunEvent.tool_call_started]:
                print(f"\nTEAM EVENT: {run_output_event.event}")
                print(f"TOOL CALL: {run_output_event.tool.tool_name}")
                print(f"TOOL CALL ARGS: {run_output_event.tool.tool_args}")

            if run_output_event.event in [TeamRunEvent.tool_call_completed]:
                print(f"\nTEAM EVENT: {run_output_event.event}")
                print(f"TOOL CALL: {run_output_event.tool.tool_name}")
                print(f"TOOL CALL RESULT: {run_output_event.tool.result}")

            # Member events
            if run_output_event.event in [RunEvent.tool_call_started]:
                print(f"\nMEMBER EVENT: {run_output_event.event}")
                print(f"AGENT ID: {run_output_event.agent_id}")
                print(f"TOOL CALL: {run_output_event.tool.tool_name}")
                print(f"TOOL CALL ARGS: {run_output_event.tool.tool_args}")

            if run_output_event.event in [RunEvent.tool_call_completed]:
                print(f"\nMEMBER EVENT: {run_output_event.event}")
                print(f"AGENT ID: {run_output_event.agent_id}")
                print(f"TOOL CALL: {run_output_event.tool.tool_name}")
                print(f"TOOL CALL RESULT: {run_output_event.tool.result}")

            if run_output_event.event in [TeamRunEvent.run_content]:
                if not content_started:
                    print("CONTENT")
                    content_started = True
                else:
                    print(run_output_event.content, end="")


    if __name__ == "__main__":
        asyncio.run(
            run_team_with_events(
                "Write me a full report on everything you can find about Agno, the company building AI agent infrastructure.",
            )
        )
    ```


  </Step>

  <Snippet file="create-venv-step.mdx" />

  <Step title="安装依赖">
    ```bash
    pip install -U agno anthropic openai ddgs
    ```
  </Step>

  <Step title="设置 API keys">

    <CodeGroup>

    ```bash Mac/Linux
export OPENAI_API_KEY="your_openai_api_key_here"
export ANTHROPIC_API_KEY="your_anthropic_api_key_here"
    ```

    ```bash Windows
$Env:OPENAI_API_KEY="your_openai_api_key_here"
$Env:ANTHROPIC_API_KEY="your_anthropic_api_key_here"
    ```
    </CodeGroup>
  </Step>
  <Step title="运行团队">
    <CodeGroup>
    ```bash Mac
    python stream_events.py
    ```
    
    ```bash Windows
    python stream_events.py
    ```
    </CodeGroup>
  </Step>

  <Step title="查找所有Cookbooks">
  探索 Agno 仓库中所有可用的Cookbooks。点击下方链接在 GitHub 上查看代码：

  <Link href="https://github.com/agno-agi/agno/tree/main/cookbook/04_teams/streaming" target="_blank">
    Agno Cookbooks on GitHub
  </Link>
</Step>
</Steps>